<div id="dropzone">
	<md-card id="gbox">
		<md-toolbar class="md-toolbar-tools" style="background-color: #03a9f4;">
			<div layout="row" layout-align="spread-apart center">
				<h1>{{groupService.selectedGroup.name}}</h1>
				<span flex></span>
				<!-- edit delete mode -->
				<!-- ADD BACK IN ng-hide="!isOwner()"  -->
        
      </div>
		</md-toolbar>
		<md-card-content>
			<div class="groupTabs">
				<md-tabs class="" md-selected="tabData.selectedIndex">
				  <md-tab id="tab1" md-on-select="sizeTab('regular')" aria-controls="tab1-content">
				    Info
				  </md-tab>
				  <md-tab id="tab2" md-on-select="sizeTab('tall')" aria-controls="tab2-content">
				    Contributors
				  </md-tab>
				  <md-tab id="tab3" md-on-select="sizeTab('tall')" aria-controls="tab3-content">
				    Followers
				  </md-tab>
				  <md-tab id="tab4" md-on-select="sizeTab('short')" aria-controls="tab4-content">
				    Settings
				  </md-tab>
				</md-tabs>
				<ng-switch on="tabData.selectedIndex" class="tabpanel-container">
				  <!-- information tab -->
				  <div role="tabpanel"
				       id="tab1-content"
				       aria-labelledby="tab1"
				       ng-switch-when="0"
				       md-swipe-left="next()"
				       md-swipe-right="previous()">
				      <h2>Created by {{groupService.selectedGroup.owner.user_name}}</h2>
				      <p ng-show="groupService.selectedGroup.tracks.length === 1"> 1 Track</p>
				      <p ng-show="groupService.selectedGroup.tracks.length !== 1">{{groupService.selectedGroup.tracks.length}} Tracks</p>
				      <p ng-show="groupService.selectedGroup.contributors.length === 1"> 1 Contributor</p>
				      <p ng-show="groupService.selectedGroup.contributors.length !== 1">{{groupService.selectedGroup.contributors.length}} Contributors</p>
				      <p ng-show="groupService.selectedGroup.followers.length === 1"> 1 Follower</p>
				      <p ng-show="groupService.selectedGroup.followers.length !== 1">{{groupService.selectedGroup.followers.length}} Followers</p>
				  </div>

				  <!-- contributors tab -->
				  <div role="tabpanel"
				       id="tab2-content"
				       aria-labelledby="tab2"
				       ng-switch-when="1"
				       md-swipe-left="next()"
				       md-swipe-right="previous()"
				       class="groupbox"
				       >

				    <div style="min-height: 60px" class="autocomplete" layout="row" layout-margin>
				      <div flex="80" layout="column">
				    	  <md-autocomplete
				    	      ng-disabled="autocompleteUsers.isDisabled"
				    	      md-no-cache="autocompleteUsers.noCache"
				    	      md-selected-item="autocompleteUsers.selectedItem"
				    	      md-search-text="autocompleteUsers.searchText"
				    	      md-items="item in autocompleteUsers.querySearch(autocompleteUsers.searchText)"
				    	      md-item-text="item.name"
				    	      placeholder="Select from current DJ-LEVels users">
				    	    <span md-highlight-text="autocompleteUsers.searchText">{{item.name}} ({{item.email}})</span>
				    	  </md-autocomplete>
				      </div>
				    	<!-- <br/> -->
				    	<div  flex="20">
				    		<md-button type="submit" class="md-raised" ng-disabled="true" ng-show="autocompleteUsers.selectedItem === null || autocompleteUsers.selectedItem === ''">
				    		Add Contributor
				    		</md-button>
				    		<md-button type="submit" class="md-raised" ng-hide="autocompleteUsers.selectedItem.name === '' || autocompleteUsers.selectedItem === null || autocompleteUsers.searchText === ''" ng-click="groupService.addUser('contributors', autocompleteUsers.selectedItem); $mdAutocompleteCtrl.clear()">
				    		Add {{autocompleteUsers.selectedItem.name}}
				    		</md-button>
				    	</div>
				    </div>
				  	<h3 ng-show="groupService.selectedGroup.contributors.length === 1">There is 1 contributor who can add and remove songs from {{groupService.selectedGroup.name}}.</h3>
				  	<h3 ng-show="groupService.selectedGroup.contributors.length !== 1">There are {{groupService.selectedGroup.contributors.length}} contributors who can add and remove songs from {{groupService.selectedGroup.name}}.</h3>
				  	<div layout="row" layout-wrap>
							<div class="member-tab-box" ng-repeat="contributor in groupService.selectedGroup.contributors" flex="5">
								<md-button class="md-fab" aria-label="{{contributor.user_name}}">
									<md-tooltip>{{contributor.user_name}}</md-tooltip>
								</md-button>
							</div>
						</div>

				  </div>

					<!-- followers tab -->
				  <div role="tabpanel"
				       id="tab3-content"
				       aria-labelledby="tab3"
				       ng-switch-when="2"
				       md-swipe-left="next()"
				       md-swipe-right="previous()" 
				       class="groupbox">

           <div style="min-height: 60px" class="autocomplete" layout="row" layout-margin>
             <div flex="80" layout="column">
           	  <md-autocomplete
           	      ng-disabled="autocompleteUsers.isDisabled"
           	      md-no-cache="autocompleteUsers.noCache"
           	      md-selected-item="autocompleteUsers.selectedItem"
           	      md-search-text="autocompleteUsers.searchText"
           	      md-items="item in autocompleteUsers.querySearch(autocompleteUsers.searchText)"
           	      md-item-text="item.name"
           	      placeholder="Select from current DJ-LEVels users">
           	    <span md-highlight-text="autocompleteUsers.searchText">{{item.name}} ({{item.email}})</span>
           	  </md-autocomplete>
             </div>
           	<!-- <br/> -->
           	<div  flex="20">
           		<md-button type="submit" class="md-raised" ng-disabled="true" ng-show="autocompleteUsers.selectedItem === null || autocompleteUsers.selectedItem === ''">
           		Add Contributor
           		</md-button>
           		<md-button type="submit" class="md-raised" ng-hide="autocompleteUsers.selectedItem.name === '' || autocompleteUsers.selectedItem === null || autocompleteUsers.searchText === ''" ng-click="groupService.addUser('followers', autocompleteUsers.selectedItem); $mdAutocompleteCtrl.clear()">
           		Add {{autocompleteUsers.selectedItem.name}}
           		</md-button>
           	</div>
           </div>
         	<h3 ng-show="groupService.selectedGroup.followers.length === 1">There is 1 follower who can see songs in {{groupService.selectedGroup.name}}.</h3>
         	<h3 ng-show="groupService.selectedGroup.followers.length !== 1">There are {{groupService.selectedGroup.followers.length}} followers who can see songs in {{groupService.selectedGroup.name}}.</h3>
         	<div layout="row" layout-wrap>
       			<div class="member-tab-box" ng-repeat="follower in groupService.selectedGroup.followers" flex="5">
       				<md-button class="md-fab" aria-label="{{follower.user_name}}">
       					<md-tooltip>{{follower.user_name}}</md-tooltip>
       				</md-button>
       			</div>
       		</div>

				  </div>
				  <!-- settings tab -->
				   <div role="tabpanel"
				        id="tab4-content"
				        aria-labelledby="tab4"
				        ng-switch-when="3"
				        md-swipe-left="next()"
				        md-swipe-right="previous()" 
				        class="groupbox">
				        <ng-md-icon icon="mode_edit" class="delete-group" size="18" ng-show="!editMode" ng-click="editMode = !editMode"></ng-md-icon>
				        <ng-md-icon icon="done" class="delete-group" size="18" ng-show="editMode" ng-click="editMode = !editMode"></ng-md-icon>
				        <ng-md-icon icon="delete" size="18" class="delete-group" ng-show="editMode" ng-click="showDeleteGroup($event)" aria-label="Delete group {{groupService.selectedGroup.name}}"></ng-md-icon>
				        <md-button ng-show="isOwner(groupService.selectedGroup)">Hello</md-button>
				   </div> 
				</ng-switch>
			</div>
		</md-card-content>
	</md-card>
<!-- group cards -->
	<div ng-repeat="track in groupService.selectedGroup.tracks | orderBy : groupService.getTrackScore : true">
		<md-card ng-show="!playerService.isCurrentTrack(track)">
		  <md-card-content>
				<div layout="row" layout-align="space-between center">
				  <span flex="10">
				    <img src="{{track.image_url}}" alt="{{track.title}}" style="width:100%; height:100%; border-radius: 50%">
				  </span>
				  <div style="padding-right: 16px; padding-left: 16px;">
				    <h3 style="display:inline">{{track.title}}</h3> 
				    <p style="display:inline">{{track.artist}}</p>
				  </div>
				  <span flex></span>
				  <div flex="10">
				  	  <ng-md-icon ng-hide="playerService.isCurrentTrackPlaying(track)" icon="play_arrow" size="36" ng-click="playerService.playTrack(track); updateTimer()" aria-label="Play {{ track.title }}"></ng-md-icon>
<!-- 			  		  <ng-md-icon ng-show="playerService.isCurrentTrackPlaying(track)" icon="pause" size="36" ng-click="playerService.togglePlay()" aria-label="Pause {{ track.title }}"></ng-md-icon> -->
				  </div>
				</div>
		  </md-card-content>
		</md-card>
		<md-card class="song-detail" ng-show="playerService.isCurrentTrack(track)">
		  <md-card-content>
					<div layout="row" layout-align="space-between center">
					  <div flex="20">
					    <img src="{{track.image_url}}" alt="{{track.title}}" style="width:100%; height:100%; border-radius: 50%">
						</div>
					  <div style="padding-right: 16px; padding-left: 16px;" flex>
					    <h2>{{track.title}}</h2>
					    <p>{{track.artist}}</p>
					    <p>Submitted by: {{track.submitted_by_name}}</p>
					    <p>
					    	<h2 class="vote" style="display:inline">{{ groupService.getTrackScore(track) }}</h2>
					    	<md-button ng-click="groupService.voteTrack('up', track)" aria-label="Upvote track"> Upvote </md-button>
					    	<md-button ng-click="groupService.voteTrack('down', track)" aria-label="Downvote track"> Downvote </md-button>
					    	<md-button ng-click="showDeleteTrack($event, track)" aria-label="Delete track"> Delete Track </md-button>
					    </p>
					  </div>
					  
					  <!-- <div flex="10">
					    <div layout="column" layout-align="center center">
					    	<ng-md-icon icon="arrow_drop_up" class="vote" size="36" ng-click="groupService.voteTrack('up', track)" aria-label="Upvote track" style="fill: {{upColor(track)}}"></ng-md-icon>
					    	<h2 class="vote">{{ groupService.getTrackScore(track) }}</h2>
					    	<ng-md-icon icon="arrow_drop_down" class="vote" size="36" ng-click="groupService.voteTrack('down', track)" aria-label="Downvote track" style="fill: {{downColor(track)}}"></ng-md-icon>
					    </div>
					  </div> -->
<!-- 					  <div>
					  <md-button>upvote</md-button>
					  </div>
					  <div>
					  <md-button>downvote</md-button>
						</div> -->
					  <div layout="column" flex="10">
						  <ng-md-icon ng-hide="playerService.isCurrentTrackPlaying(track)" icon="play_arrow" size="36" ng-click="playerService.playTrack(track); updateTimer()" aria-label="Play {{ track.title }}"></ng-md-icon>
						  <ng-md-icon ng-show="playerService.isCurrentTrackPlaying(track)" icon="pause" size="36" ng-click="playerService.togglePlay()" aria-label="Pause {{ track.title }}"></ng-md-icon>
						  <small ng-show="playerService.isCurrentTrack(track)">{{ currentTime || 0 | prettyTime }} - {{ duration | prettyTime}}</small>
					  </div>
			  </div>
<!-- 			  <div ng-show="shouldShowStats(track)">
			  	HELLLo hovering
			  </div> -->
			  <div>
			  	<span id="progressBar" ng-show="playerService.isCurrentTrack(track)" flex><md-progress-linear md-mode="determinate" value="{{progressValue|| 0 }}"></md-progress-linear></span>
			  </div>
		  </md-card-content>
		</md-card>
	</div> <!-- end group repeat -->
	

	<!-- drag show overlay-->
	<div id="overlayBox" class="visuallyhidden overlay"> 
		<div id="dropHereWrapper" layout="column" layout-align="center center" layout-margin>
			<md-button id="dropHere" class="md-fab pulse2"  aria-label="Drop a SoundCloud URL here">
				<ng-md-icon icon="insert_drive_file" size="200" style="fill:white"></ng-md-icon>
				<div style="text-transform: none;">
					Drag and drop a SoundCloud song
					<br />here to add it to {{groupService.selectedGroup.name}}!
					<br />
				</div>
			</md-button>
		</div>
	</div>
</div>